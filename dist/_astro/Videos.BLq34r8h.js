import{i as q,e as A,a as M}from"./lifecycle.BeTGaB6n.js";import{R as y,O,T as U,u as j,p as P,k as S,d as V,a as m,b as z,i as b,m as k,g as l,f as d,c as v,r as u,t as B,e as N,I as G}from"./render.Br-T7QuQ.js";import{i as C,s as H}from"./attributes.BMGIC5JQ.js";function J(r){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function K(r){y===null&&J(),O&&y.l!==null?Q(y).m.push(r):U(()=>{const o=j(r);if(typeof o=="function")return o})}function Q(r){var o=r.l;return o.u??={a:[],b:[],m:[]}}var W=d("<p>Loading videos…</p>"),X=d('<p style="color: red;"> </p>'),Y=d('<li class="video-card svelte-1kvni9k"><a target="_blank" rel="noopener noreferrer" class="vhs-card svelte-1kvni9k"><h3 class="video-title-overlay svelte-1kvni9k"> </h3></a></li>'),Z=d('<ul class="videos-grid svelte-1kvni9k"></ul>');function ae(r,o){P(o,!1);let x=k([]),w=k(!0),h=k(null);const D="/api/youtube-feed.xml";K(async()=>{try{const e=await fetch(D);if(!e.ok)throw new Error(`Failed to fetch feed: ${e.status}`);const n=await e.text(),_=new DOMParser().parseFromString(n,"application/xml"),a=Array.from(_.getElementsByTagName("entry"));b(x,a.map(t=>{const i=t.getElementsByTagName("title")[0]?.textContent??"",s=t.getElementsByTagName("yt:videoId")[0]?.textContent??"",c=t.getElementsByTagName("published")[0]?.textContent??"",p=t.getElementsByTagName("media:thumbnail")[0]?.getAttribute("url")??`https://i.ytimg.com/vi/${s}/hqdefault.jpg`,g=`https://www.youtube.com/watch?v=${s}`;return{title:i,videoId:s,published:c,thumbnailURL:p,link:g}}))}catch(e){console.error(e),b(h,e.message)}finally{b(w,!1)}}),q();var E=S(),F=V(E);{var I=e=>{var n=W();m(e,n)},L=(e,n)=>{{var T=a=>{var t=X(),i=v(t,!0);u(t),B(()=>N(i,l(h))),m(a,t)},_=a=>{var t=Z();A(t,5,()=>l(x),M,(i,s)=>{var c=Y(),f=v(c),p=v(f),g=v(p,!0);u(p),u(f),u(c),B(R=>{H(f,"href",l(s).link),N(g,R)},[()=>l(s).title.length>30?`${l(s).title.slice(0,40)}…`:l(s).title],G),m(i,c)}),u(t),m(a,t)};C(e,a=>{l(h)?a(T):a(_,!1)},n)}};C(F,e=>{l(w)?e(I):e(L,!1)})}m(r,E),z()}export{ae as default};
